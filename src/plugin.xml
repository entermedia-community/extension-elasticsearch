<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<bean id="clientPool" class="org.entermedia.elasticsearch.ClientPool">
		<property name="nodeManager">
			<ref bean="nodeManager" />
		</property>
	
	</bean>

	<!--  not used  -->
	<bean id="elasticXmlFileSearcher"
		class="org.entermedia.elasticsearch.searchers.ElasticXmlFileSearcher"
		singleton="false">
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="xmlArchive">
			<ref bean="xmlArchive" />
		</property>
		<property name="moduleManager">
			<ref bean="moduleManager" />
		</property>
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>
		<property name="searcherManager">
			<ref bean="searcherManager" />
		</property>
	</bean>


	<!-- Use beans.xml to enable this one -->
	<bean id="elasticAssetSearcher" class="org.openedit.entermedia.search.BaseAssetSearcher"
		singleton="false">
		<property name="dataConnector">
			<ref bean="elasticAssetDataConnector" />
		</property>
		<property name="webEventListener">
			<ref bean="mediaEventHandler" />
		</property>
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
	</bean>

	<bean id="elasticAssetDataConnector"
		class="org.entermedia.elasticsearch.searchers.ElasticAssetDataConnector"
		singleton="false">
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="xmlArchive">
			<ref bean="xmlArchive" />
		</property>
		<property name="moduleManager">
			<ref bean="moduleManager" />
		</property>
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="assetSecurityArchive">
			<ref bean="assetSecurityArchive" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>				
		<property name="dataFileName">
			<value>data.xml</value>
		</property>
	</bean>

	<bean id="elasticUserSearcher"
		class="org.entermedia.elasticsearch.searchers.ElasticUserSearcher">
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="userManager">
			<ref bean="userManager" />
		</property>
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>		
	
	</bean>
	<bean id="elasticGroupSearcher"
		class="org.entermedia.elasticsearch.searchers.ElasticGroupSearcher">
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="userManager">
			<ref bean="userManager" />
		</property>
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>		
		
	</bean>

	<bean id="lockSearcher" class="org.entermedia.elasticsearch.searchers.IndexElasticSearcher" singleton="false">
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="moduleManager">
			<ref bean="moduleManager" />
		</property>
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="newDataName"><value>lock</value></property>
	</bean>

	<bean id="lockManager" class="org.openedit.entermedia.cluster.ClusterLockManager" >
		<property name="searcherManager">
			<ref bean="searcherManager" />
		</property>
		<property name="nodeManager">
			<ref bean="nodeManager" />
		</property>
	</bean>

	<bean id="nodeManager" class="org.openedit.entermedia.cluster.NodeManager" >
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="searcherManager">
			<ref bean="searcherManager" />
		</property>
		<property name="xmlUtil">
			<ref bean="xmlUtil" />
		</property>
	</bean>

    <bean id="elasticUserProfileSearcher" class="org.entermedia.elasticsearch.searchers.ElasticXmlFileSearcher" singleton="false">
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="xmlArchive">
			<ref bean="xmlArchive" />
		</property>
		<property name="moduleManager">
			<ref bean="moduleManager" />
		</property>
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>		
		<property name="searcherManager">
			<ref bean="searcherManager" />
		</property>
		
		<property name="prefix"><value>users</value></property>
		<property name="newDataName"><value>userProfile</value></property>
	</bean>


	<bean id="elasticConversionTaskSearcher" class="org.entermedia.elasticsearch.searchers.ElasticXmlFileSearcher" singleton="false">
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="xmlArchive">
			<ref bean="xmlArchive" />
		</property>
		<property name="moduleManager">
			<ref bean="moduleManager" />
		</property>
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>		
		<property name="searcherManager">
			<ref bean="searcherManager" />
		</property>

		<property name="prefix"><value>assets</value></property>

	</bean>

	<bean id="elasticPublishQueueSearcher" class="org.entermedia.elasticsearch.searchers.ElasticXmlFileSearcher" singleton="false">
		<property name="pageManager">
			<ref bean="pageManager" />
		</property>
		<property name="xmlArchive">
			<ref bean="xmlArchive" />
		</property>
		<property name="moduleManager">
			<ref bean="moduleManager" />
		</property>
		<property name="clientPool">
			<ref bean="clientPool" />
		</property>
		<property name="lockManager">
			<ref bean="lockManager" />
		</property>		
		<property name="searcherManager">
			<ref bean="searcherManager" />
		</property>

		<property name="prefix"><value>assets</value></property>

	</bean>


</beans>
